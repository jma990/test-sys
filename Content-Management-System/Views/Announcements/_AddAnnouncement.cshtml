@section Scripts {
    <script>
        const token = document.querySelector('input[name="__RequestVerificationToken"]').value;
        const title = document.getElementById('announcementTitle').value || "";
        const content = document.getElementById('announcementContent').value || "";
        const departmentID = parseInt(document.getElementById('announcementDepartment').value || 0);
        document.getElementById("addAnnouncementForm").addEventListener("submit", function (e) {
            fetch(`/Announcements/AddAnnouncement`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    "RequestVerificationToken": token
                },
                body: JSON.stringify({
                    Title: title,
                    Content: content,
                    DepartmentID: departmentID
                })
            })
            .then(response => response.json())
            .then(result => {
                 
            })
            .catch(error => {
                 
            });
        });
    </script>
}



<div class="modal fade" id="AddAnnouncementModal" tabindex="-1" aria-labelledby="AddAnnouncementModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="AddAnnouncementModalLabel">Add Announcement</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form asp-controller="Announcements" asp-action="Create" method="post" id="addAnnouncementForm">
            @Html.AntiForgeryToken()

            <!-- Title -->
            <div class="mb-3">
                <label for="announcementTitle" class="form-label">Title</label><span class="text-danger">*</span>
                <input type="text" class="form-control" id="announcementTitle" name="Title" placeholder="Enter announcement title" required>
            </div>

            <!-- Content -->
            <div class="mb-3">
                <label for="announcementContent" class="form-label">Content</label><span class="text-danger">*</span>
                <textarea class="form-control" id="announcementContent" name="Content" rows="4" placeholder="Enter announcement details" required></textarea>
            </div>

            <!-- Department Dropdown -->
            <div class="mb-3">
                <label for="announcementDepartment" class="form-label">Department</label><span class="text-danger">*</span>
                <select class="form-select" id="announcementDepartment" name="DepartmentID" required>
                    <option value="">-- Select Department --</option>
                    <option value="HR">Test 1</option>
                    <option value="IT">Information Technology</option>
                    <option value="Finance">Test 2</option>
                    <option value="Operations">Test 3</option>
                    <option value="Marketing">Test 4</option>
                </select>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary">Save Announcement</button>
            </div>

        </form>
        <div id="formError" class="text-danger" style="display: none;"></div>
      </div>
    </div>
  </div>
</div>
