@page
@model Content_Management_System.Pages.ChangePersonalInfoModel
@{
}

@section Styles {
    <link rel="stylesheet" href="@Url.Content(PathDirectory.ChangePersonalInfoCSS)" />
}

@section Scripts {
    @if (TempData["SuccessMessage"] != null)
    {
        <script>
            Swal.fire({
                icon: 'success',
                title: 'Success',
                text: '@TempData["SuccessMessage"]'
            });
        </script>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <script>
            Swal.fire({
                icon: 'error',
                title: 'Error',
                text: '@TempData["ErrorMessage"]'
            });
        </script>
    }

    <script>
        // Add loading state to submit button
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('.change-personal-info-form');
            if (form) {
                form.addEventListener('submit', function() {
                    const btn = form.querySelector('.btn-submit');
                    if (btn) {
                        btn.disabled = true;
                        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
                    }
                });
            }
        });
    </script>
}

<div class="change-personal-info-container">
    <div class="change-personal-info-header">
        <h2>Personal Information</h2>
        <p>Update your personal details and contact information</p>
    </div>

    <form method="post" class="change-personal-info-form">
        <div class="form-row">
            <div class="form-group">
                <label asp-for="Input.FirstName" class="form-label">
                    First Name
                    <span class="text-danger">*</span>
                </label>
                <div class="input-wrapper">
                    <i class="fas fa-user input-icon"></i>
                    <input asp-for="Input.FirstName" 
                           class="form-control" 
                           placeholder="Enter your first name"
                           autocomplete="given-name" />
                </div>
                <span asp-validation-for="Input.FirstName" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Input.MiddleName" class="form-label">
                    Middle Name
                </label>
                <div class="input-wrapper">
                    <i class="fas fa-user input-icon"></i>
                    <input asp-for="Input.MiddleName" 
                           class="form-control" 
                           placeholder="Enter your middle name (optional)"
                           autocomplete="additional-name" />
                </div>
                <span asp-validation-for="Input.MiddleName" class="text-danger"></span>
            </div>
        </div>

        <div class="form-group">
            <label asp-for="Input.LastName" class="form-label">
                Last Name
                <span class="text-danger">*</span>
            </label>
            <div class="input-wrapper">
                <i class="fas fa-user input-icon"></i>
                <input asp-for="Input.LastName" 
                       class="form-control" 
                       placeholder="Enter your last name"
                       autocomplete="family-name" />
            </div>
            <span asp-validation-for="Input.LastName" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Input.Email" class="form-label">
                Email Address
                <span class="text-danger">*</span>
            </label>
            <div class="input-wrapper">
                <i class="fas fa-envelope input-icon"></i>
                <input asp-for="Input.Email" 
                       type="email"
                       class="form-control" 
                       placeholder="Enter your email address"
                       autocomplete="email" />
            </div>
            <span asp-validation-for="Input.Email" class="text-danger"></span>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn-submit">
                <i class="fas fa-save"></i>
                Save Changes
            </button>
            <a href="@Url.Content(PathDirectory.AccountSettingsPage)" class="btn-cancel">
                Cancel
            </a>
        </div>
    </form>
</div>